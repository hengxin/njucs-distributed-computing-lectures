%%%%%%%%%%%%%%%
\begin{frame}{}
  \centerline{\LARGE Consensus}

  \vspace{0.50cm}
  \fignocaption{width = 0.50\textwidth}{figs/consensus}

  \vspace{-0.30cm} 
  \centerline{``It looks like we have a consensus.''}ã€€
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
% \begin{frame}{}
%   \begin{description}
%     \setlength{\itemsep}{8pt}
%     \item[Consensus] Processes need to agree on a decision
%     \item[Example] Agree on whether to commit a distributed transaction \\ to a database
%   \end{description}
% \end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{columns}
    \column{0.20\textwidth}
      \centerline{\qquad\qquad \Large \bf \purple{Propose}}
    \column{0.60\textwidth}
      \fignocaption{width = 0.40\textwidth}{figs/vote}
    \column{0.20\textwidth}
      \centerline{\Large \bf \purple{Decide}\qquad\qquad}
  \end{columns}

  \pause
  \vspace{0.50cm}
  \begin{definition}[The Consensus Problem]
    \begin{description}
      \setlength{\itemsep}{5pt}
      \item[Agreement] All \blue{(non-faulty)} processes must \red{\bf agreen on the same value}.
      \item[Validity] The common decision value must be the value \red{\bf proposed} by some process.
      \item[Termination] Each \blue{(non-faulty)} process must \red{\bf eventually} decide on a value.
    \end{description}
  \end{definition}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{definition}[Consensus Protocol]
    (Informally), a consensus protocol is a system of $n$ processes
    that communicate through a set of shared objects.

    \begin{description}
      \item[Propose]
      \item[Communicate] 
      \item[Decide] 
    \end{description}
  \end{definition}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  More clarification on ``termination''

  termination requires wait-free implementation of the consensus object

  binary consensus problem
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \fignocaption{width = 0.40\textwidth}{figs/shared-memory}
  \centerline{Processes communicate through shared objects.}

  (redraw)
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{}
  consensus object (fig here)

  \begin{lstlisting}[style = JavaStyle]
    public interface Consensus<T> {
      T decide(T value);
    }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{}
  consensus protocol

  \begin{lstlisting}[style = JavaStyle]
  public abstract class ConsensusProtocol<T> 
                     implements Consensus<T> {
    protected T[] proposed = (T[]) new Object[N];
  
    void propose(T value) {
      proposed[ThreadID.get()] = value;
    }
  
    public abstract T decide(T value);
  }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  implement X using Y
\end{frame}
%%%%%%%%%%%%%%%
